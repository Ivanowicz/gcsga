@import "../variables";

.window-app.gurps {
	#apply-damage {
		.fieldblock {
			padding: 2px 16px;
			color: rgba(var(--color-on-content), 1);
			background-color: rgba(var(--color-background), 1);
			display: grid;
			grid-template-columns: max-content 1fr min-content;
			row-gap: 4px;
			column-gap: 9px;
			vertical-align: middle;
		}

		.label {
			padding: var(--padding-standard);
			font: var(--font-label);
			text-align: right;
			display: inline-flex;
			flex-flow: row nowrap;
			justify-content: right;
			align-items: center;
			height: 100%;

			>* {
				margin-left: 3px;
			}
		}

		.field {
			height: 100%;
			align-items: baseline;

			&.direct-damage,
			&.location {
				display: flex;
				flex-flow: row nowrap;
			}

			&.no-stretch {
				.checkbox-label+.checkbox-label {
					margin: 0;
				}
			}

			button {
				height: 100%;
			}

			* {
				align-self: center;
			}
		}

		input[type="number"] {
			text-align: center;
		}

		input[data-action="override-basic"],
		input[name="rofMultiplier"],
		input[name="range"],
		input[data-action="override-woundingmod"],
		input[data-action="override-vulnerability"],
		input[name="injury"],
		input[data-action="override-dr"],
		input[data-action="override-reduction"] {
			width: 4em;
		}

		input[name="injury"] {
			text-align: right;
		}

		.input-wrapper {
			border: 1px solid rgba(var(--color-control-edge));
			// padding: 1px 3px;
			padding-left: 3px;
			display: inline-block;
			border-radius: 3px 0 0 3px;
			background-color: rgb(var(--color-control));
		}

		.input-wrapper.multiply:before {
			content: "Ã—";
		}

		.input-wrapper>input {
			border: 0;
			margin: 0;
			padding: 0;
			outline: none;
			border-left: 1px solid lightgrey;
		}

		.header {
			text-align: center;
			grid-column: span 3;
		}

		.ref {
			font-size: 80%;
			text-align: right;
			text-decoration: none;
			color: rgba(var(--color-link), 1) !important;
			cursor: pointer;

			&:hover {
				color: rgba(var(--color-link-rollover), 1) !important;
			}

			&:active {
				color: rgba(var(--color-link-pressed), 1) !important;
			}
		}

		.overridden {
			background-color: rgb(var(--color-warning)) !important;
			color: rgb(var(--color-on-warning)) !important;
		}

		// .pdf {
		// 	color: rgba(var(--color-text-dark-inactive), 1);
		// 	text-decoration: none;
		// 	font-size: 80%;
		// 	text-align: left;

		// 	&:hover {
		// 		color: blue;
		// 		text-decoration: underline;
		// 		font-weight: 500;
		// 	}
		// }

		#target {
			padding: 2px 16px;

			.fieldblock {
				border: 1px solid rgb(var(--color-header));
				background-color: rgb(var(--color-content));
			}

			#vulnerability {
				display: flex;
				flex-flow: column nowrap;
				width: max-content;

				div {
					display: flex;
					flex-flow: row nowrap;
					width: 100%;
					column-gap: 9px;
				}
			}
		}

		#results {
			display: grid;
			grid-template-columns: 1fr 2fr;
			row-gap: 4px;
			column-gap: 9px;
			vertical-align: middle;
			overflow: hidden;
		}

		#calc {
			display: flex;
			flex-flow: column nowrap;
			justify-content: space-between;
			margin: 2px 16px;

			.table {
				border: 1px solid rgb(var(--color-header));
				display: grid;
				grid-template-columns: max-content min-content 1fr;

				>div:not(.header) {
					background-color: rgb(var(--color-content));
					color: rgb(var(--color-on-content));
					border-right: 1px solid rgb(var(--color-interior-divider));
					border-bottom: 1px solid rgb(var(--color-interior-divider));
				}

				>div {
					padding: var(--padding-standard);
				}

				.step,
				.descr {
					font: var(--font-label);
					font-size: 80%;
					text-align: right;
					display: inline-flex;
					flex-flow: column nowrap;
					justify-content: center;
					height: 100%;
				}

				.descr {
					text-align: left;
				}

				.value {
					text-align: center;
				}

				.step:nth-child(2n + 1):not(.header),
				.value:nth-child(2n + 2):not(.header),
				.descr:nth-child(2n + 3):not(.header) {
					background-color: rgb(var(--color-banding));
					color: rgb(var(--color-on-banding));
				}
			}

			.apply {
				display: flex;
				flex-flow: row nowrap;
				justify-content: space-between;
				margin-top: 2px;
			}
		}
	}
}